{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template auth_coupon/coupon_manage

    TODO describe template coupon_manage

    Example context (json):
    {
    }
}}
<script src="/auth/coupon/js/jquery-3.7.1.min.js"></script>
<script src="/auth/coupon/js/script.js"></script>
<div class="container">
        <h3 class="text-center d-black mb-3 py-3 bg-primary text-white"> {{# strings}}{{couponmanage}} {{/ strings}}</h3> 
    <div class="row">
        <form class="d-flex"  method="POST" >
            <input type="serach" class="form-control"  placeholder="Search here ..."  id="search">
            <select name="companyname" id="companyname"  class="form-select form-control mx-2" aria-label="Default select example" >
                {{# strings}}
                    <option value="0" selected>{{selected}}</option>
                {{/ strings}}
                {{# companies}}
                    <option value="{{name}}">{{name}}</option>
                {{/ companies}}
            </select>
            <input type="button" name ="submit" class="btn btn-primary" id="submit" value="Filter" style="padding-top:0; padding-bottom:0; margin-bottom:10px;"/>
        </form>
        <div class="col d-flex justify-content-end align-items-end mb-3">
		{{# strings}}
			<a href="/auth/coupon/coupon_form.php">
				<button class="btn btn-primary " id="add-coupon-btn" type="button"  >
					<i class="fa fa-plus-square "></i>

					{{addcoupon}}
				</button>
			</a>
			<a href="/auth/coupon/expirecode.php">
				<button class="btn btn-primary mx-2" id="add-coupon-btn" type="button">
					{{expirecoupon}}
				</button>
			</a>
			<a href="/auth/coupon/deletecoupon.php">
				<button class="btn btn-primary mx-2" id="add-coupon-btn" type="button">
					{{deletecoupon}}
				</button>
			</a>
		</div>

    </div>

    <div class="row">
        <div class="col">
            
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th  style="max-width: 15%; width: 10%">{{couponcode}}</th>
                    <th  style="max-width: 20%; width: 10%">{{notes}}</th>
                    <th  style="max-width: 15%; width: 15%">{{company}}</th>
                    <th  style="max-width: 10%; width: 25%">{{available}}</th>
                    <th  style="max-width: 10%; width: 10%">{{consumed}}</th>
                    <th  style="max-width: 10%; width: 10%">{{startdate}}</th>
                    <th  style="max-width: 10%; width: 10%">{{expiry}}</th>
                    <th  style="max-width: 10%; width: 10%">{{created}}</th>
                    <th  style="max-width: 10%; width: 10%">{{creator}}</th>
                    <th  style="max-width: 25%; width: 25%">{{actions}}</th>
                </tr>
                </thead>
                {{/ strings}}
                <tbody id="coupontable">
                {{#crecords}}
                <tr>
                    <td>{{code}}</td>
                    <td>{{notes}}</td>
                    <td>{{name}}</td>
                    <td>{{usage_count}}</td>
                    <td>{{consumed}}</td>
                    <td>{{start_date}}</td>
                    <td>{{expiry_date}}</td>
                    <td>{{creation_date}}</td>
                    <td>{{creator}}</td>
                    <td>
                        <div class="d-flex">
                            <a href="/auth/coupon/coupon_form.php?id={{id}}"class="btn btn-primary mr-2" type="button" ><i class="fa fa-gear"></i></a>
                            <a href="" class="btn btn-danger btn-js" data-id="{{id}}" type="button" ><i class="fa fa-remove"></i></a>
                        </div>
                    </td>
                </tr>
                 {{/crecords}}
                </tbody>
            </table>
        <div id="message" class="text-info"></div>
        </div>
        
    </div>
</div>